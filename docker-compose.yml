version: '1.0'

services: 
  sql-server: 
    image: mcr.microsoft.com/azure-sql-edge:latest
    cap_add: [ 'SYS_PTRACE' ]
    environment:
      - "ACCEPT_EULA=1"
      - "MSSQL_SA_PASSWORD=Str#ng_Passw#rd"
    ports: 
      - 1433:1433
    networks: 
      - shop-env

  snowflake-factory:
    image: snowflake-factory
    ports: 
      - 8081:80
    networks: 
      - shop-env  
    expose: 
      - "80"

  shop-backend-api:
    image: shop-backend-api
    ports: 
      - 8082:80
    networks: 
      - shop-env  
    expose: 
      - "80"
    depends_on:
      - sql-server
      - snowflake-factory
    environment:
      - ASPNETCORE_ENVIRONMENT=Development

  shop-frontend:
    image: shop-frontend
    ports: 
      - 8083:80
    networks: 
      - shop-env
    depends_on:
      - shop-backend-api
    environment:
      - ASPNETCORE_ENVIRONMENT=Development

networks: 
  shop-env: